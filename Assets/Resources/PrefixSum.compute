#pragma kernel CSMain
#pragma enable_d3d11_debug_symbols

RWBuffer<int> _pSum;
int _iter;

[numthreads(8,1,1)]
void CSMain (uint3 id : SV_DispatchThreadID)
{
    uint blockSize = 1 << _iter;
    uint block = id.x / blockSize;
    uint offset = id.x - block * blockSize;
    block = 2 * block + 1;
    uint index = block * blockSize + offset;
    uint prevIndex = block * blockSize - 1;

    _pSum[index] += _pSum[prevIndex];
}
